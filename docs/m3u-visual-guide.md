# Guia Visual - PadrÃµes M3U

## Estrutura de um Item M3U

```
#EXTINF:-1 [ATRIBUTOS] NOME
URL_DO_STREAM

Exemplo:
#EXTINF:-1 tvg-id="br#sportv-hd" tvg-name="SPORTV 1 FHD" tvg-logo="https://..." group-title="SPORTV",SPORTV 1 FHD
http://servidor.com:80/play/usuario/senha/12345/ts
```

---

## Ãrvore de DecisÃ£o de ClassificaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ITEM M3U                               â”‚
â”‚  Nome: "Breaking Bad S01E01"                                â”‚
â”‚  Group: "Series | Netflix"                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ContÃ©m "24H â€¢"?     â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ SIM   â”‚ NÃƒO
           â–¼       â–¼
        [LIVE]   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Group contÃ©m          â”‚
                 â”‚ "SERIES|FILMES|LIVE"? â”‚
                 â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              SIM   â”‚        â”‚ NÃƒO
                    â–¼        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Classificarâ”‚   â”‚ Analisa tÃ­tulo   â”‚
            â”‚ por grupo  â”‚   â”‚ (S##E##, ano,    â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚ qualidade, etc)  â”‚
                  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â–¼                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚        CLASSIFICAÃ‡ÃƒO FINAL          â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¤
          â”‚ LIVE   â”‚ MOVIE    â”‚ SERIES â”‚UNKNOWNâ”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## PadrÃµes Visuais por Tipo

### ğŸ”´ LIVE (Canais ao Vivo)

```
CARACTERÃSTICAS:
âœ“ Prefixo "24H â€¢"
âœ“ Group: "ABERTOS", "SPORTV", "CANAIS", "24HRS"
âœ“ URL: termina com /ts
âœ“ tvg-id preenchido (br#sportv-hd, AgroMais.br)
âœ“ HorÃ¡rios: "19:30 Vasco X Internacional"

EXEMPLOS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ #EXTINF:-1 tvg-id="br#sportv-hd"                 â”‚
â”‚   tvg-name="SPORTV 1 FHD"                        â”‚
â”‚   group-title="SPORTV"                           â”‚
â”‚   SPORTV 1 FHD                                   â”‚
â”‚ http://cdnp.xyz:80/.../760722007/2761359/ts      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ #EXTINF:-1 tvg-name="24H â€¢ Bob Esponja"          â”‚
â”‚   group-title="â­ DESENHOS 24H"                  â”‚
â”‚   24H â€¢ Bob Esponja CalÃ§a Quadrada (1999)        â”‚
â”‚ http://cdnp.xyz:80/.../2718225                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ #EXTINF:-1 tvg-name="19:30 Juventude X Bahia"    â”‚
â”‚   group-title="âš½ Jogos do Dia"                  â”‚
â”‚   19:30 Juventude X Bahia                        â”‚
â”‚ http://cdnp.xyz:80/.../2761359                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ¬ MOVIE (Filmes)

```
CARACTERÃSTICAS:
âœ“ Group: "FILMES", "CINE", "COMÃ‰DIA", "TERROR", etc
âœ“ Ano: (2024), [2024]
âœ“ Qualidade: [4K], FHD, HD
âœ“ Idioma: [L], Dublado, Legendado
âœ— NÃƒO tem S##E## no nome

EXEMPLOS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ #EXTINF:-1 tvg-name="O Homem do Saco (2024) [4K]"â”‚
â”‚   group-title="4K"                               â”‚
â”‚   O Homem do Saco (2024) [4K]                    â”‚
â”‚ http://upline.click:80/.../YsulTKs8e1ynFfNp.mp4  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ #EXTINF:-1 tvg-name="Casamento Grego 2 (2016)"   â”‚
â”‚   group-title="COMÃ‰DIA"                          â”‚
â”‚   Casamento Grego 2 (2016)                       â”‚
â”‚ http://upline.click:80/.../movie/12345.mp4       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ #EXTINF:-1 tvg-name="CINE TERROR 01"             â”‚
â”‚   group-title="CINE FILMES HD 24HRS"             â”‚
â”‚   CINE TERROR 01                                 â”‚
â”‚ http://upline.click:80/.../ts                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NOTA: "CINE ... 24HRS" Ã© LIVE (canal 24h de filmes)
      "CINE TERROR 01" sem 24HRS tambÃ©m Ã© LIVE
```

---

### ğŸ“º SERIES (SÃ©ries e EpisÃ³dios)

```
CARACTERÃSTICAS:
âœ“ PadrÃ£o S##E## (S01E01, S02E15)
âœ“ PadrÃ£o ##x## (1x01, 2x15)
âœ“ PadrÃ£o T##E## (T01E01)
âœ“ Group: "Series", "SERIES", contÃ©m plataforma
âœ“ URL: /series/ no path

EXEMPLOS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ #EXTINF:-1 tvg-name="Eu Tu E Ela S02E04"         â”‚
â”‚   group-title="Series | Amazon Prime Video"      â”‚
â”‚   Eu Tu E Ela S02E04                             â”‚
â”‚ http://cdnp.xyz:80/series/.../3095927.mp4        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ #EXTINF:-1 tvg-name="Breaking Bad 1x01"          â”‚
â”‚   group-title="Series | Netflix"                 â”‚
â”‚   Breaking Bad 1x01                              â”‚
â”‚ http://cdnp.xyz:80/series/.../episode.mp4        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ #EXTINF:-1 tvg-name="DOIS HOMENS E MEIO 01"      â”‚
â”‚   group-title="CINE SERIES HD 24HRS"             â”‚
â”‚   DOIS HOMENS E MEIO 01                          â”‚
â”‚ http://upline.click:80/.../mIxGtikMBEo.ts        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AGRUPAMENTO:
"Breaking Bad S01E01" â†’ sÃ©rie: "Breaking Bad"
"Breaking Bad S01E02"     season: 1, episode: 1/2
"Breaking Bad S02E01"     season: 2, episode: 1
```

---

## Fluxo de Dados: Do M3U ao IndexedDB

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ARQUIVO M3U (200MB+)                     â”‚
â”‚  200,000+ linhas, 50,000+ items                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   STREAMING PARSER            â”‚
      â”‚  â€¢ Fetch com range headers    â”‚
      â”‚  â€¢ Parse em chunks de 256KB   â”‚
      â”‚  â€¢ Yield batches de 100 items â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   BATCH PROCESSOR             â”‚
      â”‚  â€¢ Adaptive batch size        â”‚
      â”‚  â€¢ 500-5000 items/batch       â”‚
      â”‚  â€¢ Memory monitoring          â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   CLASSIFIER                  â”‚
      â”‚  â€¢ Analisa nome + grupo       â”‚
      â”‚  â€¢ Extrai metadados           â”‚
      â”‚  â€¢ Classifica tipo            â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€â”€â”€ LIVE â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”œâ”€â”€â”€ MOVIE â”€â”€â”€â”€â”€â”€â”€â”¤
                 â””â”€â”€â”€ SERIES â”€â”€â”€â”€â”€â”€â”¤
                                   â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   SERIES GROUPER              â”‚
      â”‚  â€¢ Hash-based grouping        â”‚
      â”‚  â€¢ Fuzzy merge singletons     â”‚
      â”‚  â€¢ Generate series metadata   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   INDEXEDDB                   â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
      â”‚  â”‚ items (50k+ registros)  â”‚  â”‚
      â”‚  â”‚ series (500+ registros) â”‚  â”‚
      â”‚  â”‚ groups (100+ registros) â”‚  â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Estrutura do IndexedDB

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PLAYLIST                       â”‚
â”‚  id: "pl_123"                                    â”‚
â”‚  name: "Minha Lista"                             â”‚
â”‚  itemCount: 50000                                â”‚
â”‚  seriesCount: 500                                â”‚
â”‚  movieCount: 10000                               â”‚
â”‚  liveCount: 5000                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â–¼                 â–¼                  â–¼              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     ITEMS      â”‚  â”‚   SERIES    â”‚  â”‚    GROUPS    â”‚  â”‚FAVORITESâ”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ id             â”‚  â”‚ id          â”‚  â”‚ id           â”‚  â”‚ id      â”‚
    â”‚ playlistId  â”€â”€â”€â”¼â”€â”€â”¤ playlistId  â”‚  â”‚ playlistId   â”‚  â”‚ itemId  â”‚
    â”‚ name           â”‚  â”‚ name        â”‚  â”‚ name         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ url            â”‚  â”‚ logo        â”‚  â”‚ mediaKind    â”‚
    â”‚ logo           â”‚  â”‚ group       â”‚  â”‚ itemCount    â”‚
    â”‚ group          â”‚  â”‚ totalEp     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ mediaKind      â”‚  â”‚ totalSeasonsâ”‚
    â”‚ seriesId    â”€â”€â”€â”¼â”€â”€â”˜ firstSeason â”‚
    â”‚ seasonNumber   â”‚  â”‚ lastSeason  â”‚
    â”‚ episodeNumber  â”‚  â”‚ firstEpisodeâ”‚
    â”‚ titleNormalizedâ”‚  â”‚ lastEpisode â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RELACIONAMENTOS:
â€¢ Item.playlistId â†’ Playlist.id (N:1)
â€¢ Item.seriesId â†’ Series.id (N:1)
â€¢ Item.group â†’ Group.name (N:1)
```

---

## Exemplo de SÃ©rie Agrupada

```
INPUT M3U:
â”€â”€â”€â”€â”€â”€â”€â”€â”€
#EXTINF:-1 ... Breaking Bad S01E01
#EXTINF:-1 ... Breaking Bad S01E02
#EXTINF:-1 ... Breaking Bad S01E03
...
#EXTINF:-1 ... Breaking Bad S05E16

OUTPUT INDEXEDDB:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SERIES                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id: "serie_pl123_breaking_bad"                   â”‚
â”‚ playlistId: "pl_123"                             â”‚
â”‚ name: "Breaking Bad"                             â”‚
â”‚ logo: "https://image.tmdb.org/..."               â”‚
â”‚ group: "Series | Netflix"                        â”‚
â”‚ totalEpisodes: 62                                â”‚
â”‚ totalSeasons: 5                                  â”‚
â”‚ firstSeason: 1                                   â”‚
â”‚ lastSeason: 5                                    â”‚
â”‚ firstEpisode: 1                                  â”‚
â”‚ lastEpisode: 16                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ (1:N)
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ITEMS (62 registros)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id: "item_001"                                   â”‚
â”‚ seriesId: "serie_pl123_breaking_bad"             â”‚
â”‚ seasonNumber: 1                                  â”‚
â”‚ episodeNumber: 1                                 â”‚
â”‚ name: "Breaking Bad S01E01"                      â”‚
â”‚ url: "http://cdnp.xyz:80/.../ep001.mp4"          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id: "item_002"                                   â”‚
â”‚ seriesId: "serie_pl123_breaking_bad"             â”‚
â”‚ seasonNumber: 1                                  â”‚
â”‚ episodeNumber: 2                                 â”‚
â”‚ ...                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Performance: Antes vs Depois das OtimizaÃ§Ãµes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPERAÃ‡ÃƒO            â”‚   ANTES    â”‚   DEPOIS   â”‚  GANHO   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Parse 200MB M3U     â”‚   45s      â”‚    15s     â”‚   3x     â”‚
â”‚ Classify 50k items  â”‚   12s      â”‚    4s      â”‚   3x     â”‚
â”‚ Series grouping     â”‚   8s       â”‚    1s      â”‚   8x     â”‚
â”‚ Insert to IndexedDB â”‚   20s      â”‚    10s     â”‚   2x     â”‚
â”‚ Query by group      â”‚   500ms    â”‚    150ms   â”‚   3.3x   â”‚
â”‚ Search by text      â”‚   1200ms   â”‚    200ms   â”‚   6x     â”‚
â”‚ Fuzzy merge series  â”‚   5s       â”‚    500ms   â”‚   10x    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL (full parse)  â”‚   ~90s     â”‚    ~30s    â”‚   3x     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MEMORY USAGE:
â€¢ Peak: 450MB â†’ 350MB (22% reduÃ§Ã£o)
â€¢ Stable: 180MB â†’ 150MB (17% reduÃ§Ã£o)
```

---

## Ãndices do IndexedDB (Otimizados)

```
TABELA: items
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PRIMARY: id
INDICES:
  â€¢ playlistId
  â€¢ [playlistId+url]           â† Dedupe rÃ¡pida O(1)
  â€¢ [playlistId+titleNormalized] â† Busca case-insensitive
  â€¢ [playlistId+group]
  â€¢ [playlistId+mediaKind]
  â€¢ [playlistId+group+mediaKind] â† CarrossÃ©is otimizados
  â€¢ [seriesId+seasonNumber+episodeNumber] â† Ordem episÃ³dios
  â€¢ url
  â€¢ group
  â€¢ mediaKind
  â€¢ titleNormalized
  â€¢ seriesId

QUERY PERFORMANCE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SELECT * FROM items              â”‚          â”‚          â”‚
â”‚ WHERE playlistId = ? AND         â”‚  SEM     â”‚   COM    â”‚
â”‚       group = ?                  â”‚ ÃNDICE   â”‚ ÃNDICE   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 50,000 items                     â”‚  500ms   â”‚  50ms    â”‚
â”‚ 100,000 items                    â”‚  1200ms  â”‚  120ms   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ClassificaÃ§Ã£o: Casos Especiais

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CASO ESPECIAL         â”‚ CLASSIFICAÃ‡ÃƒO â”‚ MOTIVO        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ "24H â€¢ Breaking Bad"  â”‚ LIVE          â”‚ Prefixo 24H   â”‚
â”‚ "CINE TERROR 24HRS"   â”‚ LIVE          â”‚ Canal 24h     â”‚
â”‚ "Breaking Bad S01E01" â”‚ SERIES        â”‚ PadrÃ£o S##E## â”‚
â”‚ "Harry Potter 1"      â”‚ MOVIE         â”‚ Group:ColetÃ¢n â”‚
â”‚ "Show (2020)"         â”‚ UNKNOWN       â”‚ SÃ³ 1 match    â”‚
â”‚ "Flow (2024) Dub"     â”‚ MOVIE         â”‚ 2+ matches    â”‚
â”‚ "19:30 Vasco X Inter" â”‚ LIVE          â”‚ HorÃ¡rio:jogo  â”‚
â”‚ "SPORTV 1 FHD"        â”‚ LIVE          â”‚ Canal TV      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Resumo: Melhores PrÃ¡ticas

### âœ… DO (Fazer)

```
âœ“ Usar Ã­ndices compostos para queries comuns
âœ“ Normalizar dados (uppercase, trim, etc)
âœ“ Cache de regex compiladas
âœ“ Batch processing incremental
âœ“ Hash-based grouping antes de fuzzy merge
âœ“ Validar URLs antes de inserir
âœ“ GC estratÃ©gico em intervalos regulares
```

### âŒ DON'T (NÃ£o Fazer)

```
âœ— Regex em loop sem cache
âœ— String comparison case-sensitive
âœ— Full table scans sem Ã­ndices
âœ— Insert item-by-item (usar bulkPut)
âœ— Confiar apenas em fuzzy merge (usar hash first)
âœ— URLs invÃ¡lidas no DB
âœ— Deixar memÃ³ria crescer indefinidamente
```

---

## Links e ReferÃªncias

- [AnÃ¡lise Completa de PadrÃµes](./m3u-patterns-analysis.md)
- [RecomendaÃ§Ãµes de OtimizaÃ§Ã£o](./optimization-recommendations.md)
- [Dexie.js Documentation](https://dexie.org)
- [IndexedDB Best Practices](https://web.dev/indexeddb-best-practices/)
